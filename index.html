<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aletrade.com</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3XRCMEQVZT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3XRCMEQVZT');
</script>
    <script type="module" crossorigin src="/assets/index-904c1ccb.js"></script>
    <link rel="stylesheet" href="/assets/index-2f35018c.css">
  </head>
  <body>
    <div id="root"></div>
    
  <!-- Chatbase Assistant -->
<script>
  window.chatbaseConfig = {
    chatbotId: "-VKRtP1SagkS76xJgj5fa",
  };
</script>
<script
  src="https://www.chatbase.co/embed.min.js"
  chatbotId="-VKRtP1SagkS76xJgj5fa"
  defer
></script>
<script>
  // Verifica si el chat se ha cargado correctamente en 5 segundos
  window.addEventListener("load", () => {
    setTimeout(() => {
      const chatIframe = document.querySelector("iframe[src*='chatbase']");
const chatUnavailable = document.body.innerText.includes("This chatbot is currently unavailable");

if (!chatIframe || chatUnavailable) {

        const warning = document.createElement("div");
        warning.style.position = "fixed";
        warning.style.bottom = "20px";
        warning.style.left = "20px";
        warning.style.backgroundColor = "#ffefc4";
        warning.style.border = "1px solid #d6a700";
        warning.style.padding = "12px 16px";
        warning.style.borderRadius = "8px";
        warning.style.fontFamily = "sans-serif";
        warning.style.zIndex = "9999";
        warning.innerHTML = '⚠️ El asistente no está disponible. Puedes <a href="/contacto" style="color:#0073e6;text-decoration:underline;">contactar aquí</a>.';
        document.body.appendChild(warning);
      }
    }, 5000); // Espera 5 segundos
  });
</script>
<!-- Detección automática si el chatbot está fuera de servicio -->
<script>
window.addEventListener("load", function () {
  setTimeout(() => {
    const iframe = document.querySelector("iframe[src*='chatbase']");
    if (!iframe) {
      // No se ha cargado el iframe del chatbot
      mostrarAvisoCaida();
    } else {
      // Esperar a que cargue el iframe e intentar acceder a su contenido
      try {
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        const check = iframeDoc.body.innerText.includes("unavailable") || iframeDoc.body.innerText.includes("check your account");
        if (check) mostrarAvisoCaida();
      } catch (e) {
        // No se puede acceder por políticas de CORS, asumimos que puede estar caído
        mostrarAvisoCaida();
      }
    }

    function mostrarAvisoCaida() {
      const aviso = document.createElement("div");
      aviso.innerHTML = `
        ⚠️ El asistente no está disponible en este momento.<br>
        <a href="/contacto" style="color: white; text-decoration: underline;">Pulsa aquí para contactar directamente</a>.
      `;
      aviso.style.position = "fixed";
      aviso.style.bottom = "20px";
      aviso.style.left = "20px";
      aviso.style.background = "#c0392b";
      aviso.style.color = "white";
      aviso.style.padding = "12px";
      aviso.style.borderRadius = "6px";
      aviso.style.zIndex = 9999;
      aviso.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
      document.body.appendChild(aviso);
    }
  }, 4000); // Esperamos 4 seg a que cargue el iframe si puede
});
</script>
<script>
window.addEventListener("load", function () {
  setTimeout(() => {
    const iframe = document.querySelector("iframe[src*='chatbase']");
    if (!iframe) return mostrarBanner();

    try {
      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
      const texto = iframeDoc?.body?.innerText || "";
      if (texto.includes("unavailable") || texto.includes("check your account")) {
        mostrarBanner();
      }
    } catch (e) {
      // CORS bloqueado: asumimos error y mostramos banner
      mostrarBanner();
    }

    function mostrarBanner() {
      const aviso = document.createElement("div");
      aviso.innerHTML = `
        ⚠️ El Asistente Virtual no está disponible temporalmente.<br>
        Puedes contactar directamente en <a href="mailto:info@aletrade.com" style="color:white; text-decoration: underline;">info@aletrade.com</a>,
        <a href="https://www.aletrade.com/contacto" style="color:white; text-decoration: underline;">aquí</a> o por WhatsApp <a href="https://wa.me/34604549528" style="color:white; text-decoration: underline;">+34 604 549 528</a>.
      `;
      aviso.style.position = "fixed";
      aviso.style.top = "0";
      aviso.style.left = "0";
      aviso.style.width = "100%";
      aviso.style.padding = "14px";
      aviso.style.backgroundColor = "#c0392b";
      aviso.style.color = "white";
      aviso.style.textAlign = "center";
      aviso.style.zIndex = "99999";
      aviso.style.boxShadow = "0 2px 6px rgba(0,0,0,0.3)";
      aviso.style.fontSize = "14px";
      aviso.style.lineHeight = "1.4";
      document.body.prepend(aviso);
    }
  }, 4000);
});
</script>

  </body>
</html>